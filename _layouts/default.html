<!DOCTYPE html>
<html lang="tr">
<head>
  {% include head.html %}
</head>
<body>
  <div class="site">
  
    <header class="site-header">
      <div class="title">
        <a class="extra" href="{{ site.baseurl }}/">İKİ DENİZ</a>
      </div>
      
<nav>
  <ul>
    {% unless page.url == "/" %}
      <li>
        <a href="{{ site.baseurl }}/">
          <i class="fas fa-home"></i> <!-- Ev simgesi -->
          <span class="sr-only">{{ site.data.languages[page.lang].Home }}</span> <!-- Erişilebilirlik için metin -->
        </a>
      </li>
    {% endunless %}
  </ul>
</nav>
      
    </header>

    <main class="site-content">  

      <!-- Dil Filtreleme Butonları (Sadece Ana Sayfada Görünür) -->
      {% if page.url == "/" %}
      <div style="margin-bottom: 20px;">
        <button class="button" onclick="filterPosts('en')">English</button>
        <button class="button" onclick="filterPosts('tr')">Türkçe</button>
        <button class="button" onclick="filterPosts('all')">All</button>
      </div>
      {% endif %}

{% unless page.url == "/" %}
        {% assign day = page.date | date: "%-d" %}
        {% assign month = page.date | date: "%m" %}
        {% assign year = page.date | date: "%Y" %}
        {% if page.lang == "tr" %}
          {% assign turkish_months = "Ocak,Şubat,Mart,Nisan,Mayıs,Haziran,Temmuz,Ağustos,Eylül,Ekim,Kasım,Aralık" | split: "," %}
          {% assign month_index = month | minus: 1 %}
          <p class="post-date">
            Yayın Tarihi: {{ day }} {{ turkish_months[month_index] }} {{ year }}
          </p>
        {% else %}
          <p class="post-date">
            Published on: {{ page.date | date: "%B %d, %Y" }}
          </p>
        {% endif %}
      {% endunless %}
      
      {{ content }}

      <!-- Post Listesi (Sadece Ana Sayfada Görünür - Butonlarla Filtrelenen Liste) -->
      {% if page.url == "/" %}
      <ul id="filtered-post-list">
        {% for post in site.posts %}
        <li class="post-item {{ post.lang }}" data-lang="{{ post.lang }}">
          <span>{{ post.date | date: "%d %B %Y" | replace: "January", "Ocak" | replace: "February", "Şubat" | replace: "March", "Mart" | replace: "April", "Nisan" | replace: "May", "Mayıs" | replace: "June", "Haziran" | replace: "July", "Temmuz" | replace: "August", "Ağustos" | replace: "September", "Eylül" | replace: "October", "Ekim" | replace: "November", "Kasım" | replace: "December", "Aralık" }}</span> &raquo;
          <a href="{{ post.url }}">{{ post.title }}</a>
        </li>
        {% endfor %}
      </ul>
      {% endif %}

      <!-- Tüm Postaların Listesi (Her Sayfada Görünür) -->
      <ul id="all-post-list">
        {% for post in site.posts %}
        <li class="post-item {{ post.lang }}" data-lang="{{ post.lang }}">
          <span>{{ post.date | date: "%d %B %Y" | replace: "January", "Ocak" | replace: "February", "Şubat" | replace: "March", "Mart" | replace: "April", "Nisan" | replace: "May", "Mayıs" | replace: "June", "Haziran" | replace: "July", "Temmuz" | replace: "August", "Ağustos" | replace: "September", "Eylül" | replace: "October", "Ekim" | replace: "November", "Kasım" | replace: "December", "Aralık" }}</span> &raquo;
          <a href="{{ post.url }}">{{ post.title }}</a>
        </li>
        {% endfor %}
      </ul>

      <!-- Katagori kontrolü  -->
      {% unless page.url == "/" %}
  <div id="related-posts">
    <h3>
      {% if page.lang == "en" %}
        Related Posts
      {% else %}
        Aynı Kategorideki Yazılar
      {% endif %}
    </h3>
    
    {% if site.categories[page.category] %}
      <ul>
        {% for post in site.categories[page.category] limit: 3 %}
          {% if post.url != page.url %}
            <li><a href="{{ post.url }}">{{ post.title }}</a></li>
          {% endif %}
        {% endfor %}
      </ul>
    {% else %}
      <p>
        {% if page.lang == "en" %}
          No posts found in this category.
        {% else %}
          Bu kategoride henüz yazı bulunmamaktadır.
        {% endif %}
      </p>
    {% endif %}
  </div>
{% endunless %}
      <div id="tarih-saat">
        <p id="tarih"></p>
        <p id="saat"></p>
      </div>
      
      {% if page.layout == "post" %}
        {% include social-share.html %}
      {% endif %}
      
    </main>
    {% include footer.html %}
  </div>
<div>
  <!-- Kelime Bulutu (Sadece Anasayfada Göster) -->
  {% if page.url == "/" %}
    {% include wordcloud.html %}
  {% endif %}
  </div>
  <!-- GoatCounter Script -->
  <script data-goatcounter="https://gg123.goatcounter.com/count"
          async src="//gc.zgo.at/count.js"></script>
  <!-- JavaScript Dosyası -->
  <script src="{{ '/assets/js/scripts.js' | relative_url }}"></script>

  <style>
    .button {
      margin: 5px;
      padding: 10px 20px;
      font-size: 16px;
      cursor: pointer;
    }
    .hidden {
      display: none;
    }
  </style>

  <script>
    function filterPosts(language) {
      const filteredPosts = document.querySelectorAll('#filtered-post-list .post-item');
      const allPosts = document.querySelectorAll('#all-post-list .post-item');

      // Filtrelenen listedeki postları gizle/göster
      filteredPosts.forEach(post => {
        if (language === 'all' || post.dataset.lang === language) {
          post.classList.remove('hidden');
        } else {
          post.classList.add('hidden');
        }
      });

      // Tüm postaların listesinde herhangi bir değişiklik yapma
      allPosts.forEach(post => {
        post.classList.remove('hidden');
      });

      // Seçilen dil bilgisini yerel depolamaya kaydet
      localStorage.setItem('selectedLanguage', language);
    }

    // Sayfa yüklendiğinde yerel depolamadan dil bilgisini al ve uygula
    window.onload = function() {
      const selectedLanguage = localStorage.getItem('selectedLanguage') || 'all';
      filterPosts(selectedLanguage);
    };
  </script>
</body>
</html>